<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>E-Commerce Sentiment Analysis</title>
    <meta name="description" content="E-Commerce Sentiment Analysis">
    <meta name="author" content="Pratik Pramod Revankar">
    <link rel="stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic+Coding:700|Montserrat:300,500|Roboto:100,300,400|Roboto+Mono:400,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js" language="JavaScript"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>

</head>
<body>

    <canvas id="myChart"  style="display: block; height: 534px; width: 1068px;" width="200" height="200"></canvas>




    <script type="text/javascript">
        let ctx = document.getElementById('myChart')
        // make API Request
        let data = [
            {
                "timestamp": "2020-04-25T00:00:00.000Z",
                "result": {
                    "total_event_count": 25
                }
            },
            {
                "timestamp": "2020-04-26T00:00:00.000Z",
                "result": {
                    "total_event_count": 24
                }
            },
            {
                "timestamp": "2020-04-27T00:00:00.000Z",
                "result": {
                    "total_event_count": 28
                }
            },
            {
                "timestamp": "2020-04-28T00:00:00.000Z",
                "result": {
                    "total_event_count": 26
                }
            },
            {
                "timestamp": "2020-04-29T00:00:00.000Z",
                "result": {
                    "total_event_count": 30
                }
            },
            
        ];
        let labels = data.map((dataItem) => dataItem.timestamp.split("T")[0])
        let values = data.map((dataItem) => dataItem.result.total_event_count)
        let chartData = data.map((dataItem) => {
            return {
                x: dataItem.timestamp.split("T")[0],
                y: dataItem.result.total_event_count
            }
        });
        console.log('Chart Data: ', chartData);
        let myLineChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels,
                datasets: [{
                    "label": "event count",
                    "data": values,
                    "fill": false,
                    "borderColor": "rgb(75, 192, 192",
                    "lineTension": 0.1
                }]
            },
            options: {
				responsive: true,
				title: {
					display: true,
					text: 'Timeseries event analysis'
				},
				tooltips: {
					mode: 'index',
					intersect: false,
				},
				hover: {
					mode: 'nearest',
					intersect: true
				},
				scales: {
					xAxes: [{
						display: true,
						scaleLabel: {
							display: true,
							labelString: 'Date'
						}
					}],
					yAxes: [{
						display: true,
						scaleLabel: {
							display: true,
							labelString: 'Event Count'
						}
					}]
				}
			}
            // options: options
        });

    </script>

</body>
</html>
